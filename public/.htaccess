# Rewrite Rules

RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.(.+)$
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# RewriteCond %{HTTP_HOST} ^example.co.uk$
# RewriteRule ^(.*)$ http://example.com/$1 [R=301,L]

RewriteRule ^(.*).[0-9]{10}(\.\w+)$ $1$2 [L]

RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule (.*) index.php?_=$1 [QSA,L]

# Character Encoding

AddDefaultCharset utf-8
AddCharset utf-8 .atom .css .js .json .rss .vtt .xml

# File Types

AddType audio/mp4							m4a f4a f4b
AddType audio/ogg							oga ogg

AddType application/javascript				js jsonp
AddType application/json					json

AddType video/mp4							mp4 m4v f4v f4p
AddType video/ogg							ogv
AddType video/webm							webm
AddType video/x-flv							flv

AddType application/font-woff				woff
AddType application/vnd.ms-fontobject		eot
AddType application/x-font-ttf				ttc ttf
AddType font/opentype						otf
AddType image/svg+xml						svg svgz
AddEncoding gzip							svgz

AddType application/octet-stream			safariextz
AddType application/x-chrome-extension		crx
AddType application/x-opera-extension		oex
AddType application/x-shockwave-flash		swf
AddType application/x-web-app-manifest+json	webapp
AddType application/x-xpinstall				xpi
AddType application/xml						atom rdf rss xml
AddType image/webp							webp
AddType image/x-icon						ico
AddType text/cache-manifest					appcache manifest
AddType text/vtt							vtt
AddType text/x-component					htc
AddType text/x-vcard						vcf
				
# Expires, Cache & ETags

ExpiresActive On
ExpiresDefault								"access plus 1 month"

ExpiresByType application/x-web-app-manifest+json "access plus 0 seconds"
ExpiresByType text/cache-manifest			"access plus 0 seconds"

ExpiresByType text/html						"access plus 0 seconds"

ExpiresByType text/xml						"access plus 0 seconds"
ExpiresByType application/xml				"access plus 0 seconds"
ExpiresByType application/json				"access plus 0 seconds"

ExpiresByType application/rss+xml			"access plus 1 hour"
ExpiresByType application/atom+xml			"access plus 1 hour"

Header set Cache-Control "public"
Header unset ETag

FileETag None

# Output Compression

SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding

AddOutputFilterByType DEFLATE application/atom+xml \
							  application/javascript \
							  application/json \
							  application/rss+xml \
							  application/vnd.ms-fontobject \
							  application/x-font-ttf \
							  application/x-web-app-manifest+json \
							  application/xhtml+xml \
							  application/xml \
							  font/opentype \
							  image/svg+xml \
							  image/x-icon \
							  text/css \
							  text/html \
							  text/plain \
							  text/x-component \
							  text/xml

# Force IE Standards Mode

Header set X-UA-Compatible "IE=edge"
<FilesMatch "\.(appcache|crx|css|cur|eot|gif|htc|ico|jpe?g|js|m4a|m4v|manifest|mp4|oex|oga|ogg|ogv|otf|pdf|png|safariextz|svgz?|ttf|vcf|webapp|webm|webp|woff|xml|xpi)$">
	Header unset X-UA-Compatible
</FilesMatch>
	
# Block 3rd Party Framing

Header always append X-Frame-Options SAMEORIGIN

# Configuration

DirectorySlash Off